{% extends "accounts/layout.html" %}
{% load static %}

{% block body %}
<div style="padding: 2em" data-theme="dark">
    {% for message in messages %}
        <div class="alert alert-primary">
            {{ message }}
        </div>
    {% endfor %}
    <h3><strong>Tasks</strong></h3>
    <table>
            <tr>
                <div class="form-wrapper">
                    <input autocomplete="off" style="font-size: 24px; height: auto; padding: 0;" name="task" type="text" placeholder="New task"/>
                    <input style="padding: 0px;" type="submit" hidden />
                    <hr>
                </div>
            </tr>
            {% for task in tasks %}
            <tr>
                <div class="task-wrapper" id="{{ task.id }}.taskDiv" style="padding-top: .5em; padding-bottom: 2em;">
                        {% if task.complete %}
                            <a href="">
                                <div id="{{ task.id }}" class="todo-wrapper" style="text-decoration: line-through; margin: 0px;
                                padding: 0px; width: 80%;" data-theme="light">
                                        ☒
                                        {{ task.task }}
                                        <strong>{{ task.user }}</strong>
                                        {{ task.completedBy }}
                                        <div style="float: right; display: flex;">
                                            <a class="task-delete" id="{{task.id}}.delete" href="">
                                                ✗
                                            </a>
                                        </div>
                                </div>

                            </a>
                        {% else %}
                        <div id="{{ task.id }}" class="todo-wrapper">
                                <a id="{{task.id}}.complete" href="">
                                    <div class="text-div" style="width: 80%; float: left; display: flex;">
                                        ☐
                                        {{ task.task }}
                                        <strong>({{ task.user }})</strong>
                                    </div>
                                </a>
                                    <div style="float: right; display: flex;">
                                        <a class="task-delete" id="{{ task.id }}.delete" href="" style="padding-right: .5em">✗ </a>
                                        <a class="task-edit" id="{{ task.id }}.edit" href="">✎ </a>
                                    </div>
                                </div>
                        {% endif %}
                    </div>
                </a>
                <hr>
            </tr>
            {% empty %}
            <h3>No tasks</h3>
            {% endfor %}
    </table>
</div>

{% endblock %}

{% block script %}
    <script src="{% static 'accounts/todo.js' %}"></script>
{% endblock %}