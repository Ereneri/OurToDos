{% extends "accounts/layout.html" %}

{% block body %}
<div style="padding: 2em" data-theme="dark">
    {% for message in messages %}
        <div class="alert alert-primary">
            {{ message }}
        </div>
    {% endfor %}
    <h3><strong>Tasks</strong></h3>
        <table>
            {% for task in tasks %}
            <tr>
                <a href="{% url 'completeTask' task.id %}" style="text-decoration: none;" data-theme="dark">
                    <div class="form-check">
                        {% if task.complete %}
                        <div style="text-decoration: line-through; margin: 0px;
                        padding: 0px;" data-theme="light">
                                ☒
                                {{ task.task }}
                                <strong>{{ task.user }}</strong>
                                {{ task.completedBy }}
                                <a href="{% url 'removeTask' task.id %}" style="text-decoration: none; float: right;" data-theme="dark">
                                    x
                                </a>
                        </div>
                        {% else %}
                            ☐
                            {{ task.task }}
                            <strong>({{ task.user }})</strong>
                            <a href="{% url 'removeTask' task.id %}" style="text-decoration: none; float: right;" data-theme="dark">✗</a>
                            <a class="edit" style="float:right; padding-right: 10px;text-decoration: none;" data-theme="dark">✎</a>
                        {% endif %}
                    </div>
                </a>
                <hr>
            </tr>
            {% empty %}
            <h3>No tasks</h3>
            {% endfor %}
            <tr>
                <div class="form-wrapper">
                    <form action="{% url 'createNewTask' %}" method="POST">
                        {% csrf_token %}
                        <input id="task" name="task" type="text" placeholder="New task"/>
                        <input id="myButton" type="submit" hidden />
                    </form>
                </div>
            </tr>
            </tr>
    </table>

</div>

<script>
    var form = document.getElementById('form');
    form.addEventListener('keyup', function(event) {
        if (event.keyCode === 13) {
            event.preventDefault();
            document.getElementById('myButton').click();
        }
    });

    function buttonCode()
    {
        alert("Button code executed.");
    }
</script>

{% endblock %}